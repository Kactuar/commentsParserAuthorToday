# Puppeteer для сбора комментариев с сайта

Этот скрипт с помощью Puppeteer извлекает комментарии с сайта с пагинацией. Он собирает имя автора, время публикации и текст комментария, записывая данные в уникальный текстовый файл.

---

## Возможности

- **Обработка пагинации:** Автоматически переходит между страницами комментариев.
- **Постраничное сохранение:** Сохраняет комментарии после обработки каждой страницы, предотвращая потерю данных.
- **Уникальное имя файла:** Имя файла генерируется на основе стартового URL, чтобы избежать перезаписи данных.
- **Настройка начальной страницы:** Позволяет задавать URL начальной страницы для сбора комментариев.
- **Обработка ошибок:** Скрипт корректно завершает выполнение при возникновении ошибок.

---

## Требования

Перед использованием убедитесь, что у вас установлены:

1. **Node.js** (версии 14 и выше)
2. **npm** (менеджер пакетов для Node.js)

Для установки Puppeteer выполните команду:

    npm install puppeteer

---

## Инструкция по запуску

1. Скачайте скрипт и сохраните его на вашем компьютере.
2. Откройте файл скрипта в текстовом редакторе и настройте переменную `startUrl`:

    const startUrl = 'https://example.com/page=1'; // Укажите нужный стартовый URL

3. Запустите скрипт командой:

    node main.js

---

## Результат работы

- Скрипт сохранит комментарии в текстовый файл в той же папке, где находится скрипт.
- Имя файла генерируется на основе стартового URL, например: `comments_https_example_com_page_1.txt`.

### Формат файла

Каждый комментарий будет записан в следующем формате:

    Комментарий #1
    Автор: Иван Иванов
    Дата: 2024-12-12T12:00:00Z
    Текст:
    Это пример текста комментария.
    ------------------------------------

---

## Настройки

### Начальная страница
Задайте начальную страницу для сбора данных, изменив переменную `startUrl`.

### Таймаут
Для настройки времени ожидания при загрузке страниц используйте:

    page.setDefaultNavigationTimeout(6000000); // Увеличьте значение при необходимости

---

## Обработка ошибок

- Если страница не загрузилась, скрипт запишет ошибку в консоль и завершит выполнение.
- Убедитесь, что целевой сайт доступен и не блокирует автоматические запросы.

---

## Примечания

- Скрипт может не работать на сайтах с серьёзными защитными мерами от ботов.
- Используйте скрипт ответственно и в соответствии с условиями использования сайта.

---

## Лицензия

Скрипт распространяется под лицензией MIT. Вы можете использовать и модифицировать его.
